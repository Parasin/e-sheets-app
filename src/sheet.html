<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../bower_components/paper-progress/paper-progress.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/e-styles/e-colors.html">
<link rel="import" href="../bower_components/e-styles/e-font.html">
<link rel="import" href="../bower_components/vaadin-grid/vaadin-grid.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/e-spread-sheet/e-spread-sheet.html">

<dom-module id="sheet-view">
  <template>
    <style include="e-colors"></style>
    <style include="e-font"></style>

    <style>
      :host {
        display: block;
        height: 100%;
      }  
    </style>

    <app-location 
      route="{{route}}">
    </app-location>

    <app-route
      id="route"
      route="{{route}}"
      pattern="/:page"
      data="{{routeData}}"
      tail="{{subroute}}">
    </app-route>

    <iron-localstorage name="e-keystore"
      value="{{key}}">
    </iron-localstorage>

    <e-spread-sheet
      title="My Sheet"
      sheet-id="{{_id}}"
      url="http://localhost:9999/spreadsheets">
    </e-spread-sheet>
  </template>

  <script>

    Polymer( {
      is : 'sheet-view',

      properties : { },
      
      ready : function( ) { },
      
      attached : function( ) { 
        this._id = this.$.route.tail.path.replace( "/", "" );

        console.log( this._id );
      },
    } );

    /*fetch( "http://localhost:8888/user?token=" + this.key, {
        method : 'GET',
        mode   : 'cors'
      } ).then( ( res ) => {
        return res.json( );
      } ).then( ( json ) => {
        this.users = json.users;
      } );*/

  </script>

</dom-module>